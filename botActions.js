const { Markup } = require("telegraf");
const { delay } = require("./googleSheetsFunc");

function setupBotActions(bot) {
    bot.action("FITNESS_PROJECT", async (ctx) => {
        await ctx.reply(
            `–ú–æ–π —Ñ–∏—Ç–Ω–µ—Å-–ø—Ä–æ–µ–∫—Ç - —ç—Ç–æ –Ω–µ –º–∞—Ä–∞—Ñ–æ–Ω, —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—é,–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∂–∏–∑–Ω–∏.

10 —Ñ–µ–≤—Ä–∞–ª—è —Å—Ç–∞—Ä—Ç—É–µ—Ç 16-–π –ø–æ—Ç–æ–∫ —Ñ–∏—Ç–Ω–µ—Å-–ø—Ä–æ–µ–∫—Ç–∞ Naumova Team –≤ –∫–æ—Ç–æ—Ä–æ–º —Ç—ã —Å–º–æ–∂–µ—à—å –ø–æ–ª—É—á–∏—Ç—å:

‚úÖ 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –≤—ã–±–æ—Ä:
- –ø–æ –º–µ–Ω—é-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É —Å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º –∫–ë–ñ–£ (60 —Ä–µ—Ü–µ–ø—Ç–æ–≤)
- –ø–æ –º–µ—Ç–æ–¥—É —Ç–∞—Ä–µ–ª–∫–∏ –±–µ–∑ –ø–æ–¥—Å—á–µ—Ç–∞ –∫–∞–ª–æ—Ä–∏–π
- –º–µ–Ω—é –Ω–∞ 21 –¥–µ–Ω—å —Å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º –ö–ë–ñ–£

‚úÖ –ü—Ä–æ–¥—É–∫—Ç–æ–≤—É—é –∫–æ—Ä–∑–∏–Ω—É –Ω–∞ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
            
‚úÖ 9 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –Ω–∞ –≤—Å–µ —Ç–µ–ª–æ –ø–æ 30 –º–∏–Ω, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è

‚úÖ –û–±—â–∏–π —á–∞—Ç —Å –ö–∞—Ä–∏–Ω–æ–π`,
            { parse_mode: "HTML" },
        );

        await delay(3000);
        await ctx.replyWithMediaGroup([
            {
                type: "photo",
                media: { source: "./assets/images/eat_1.jpg" },
            },
            {
                type: "photo",
                media: { source: "./assets/images/eat_2.jpg" },
            },
            {
                type: "photo",
                media: { source: "./assets/images/eat_3.jpg" },
            },
        ]);

        await delay(5000);
        await ctx.reply(
            "–ü–æ—Å–ø–µ—à–∏, —Å—Ç–∞—Ä—Ç –ø–æ—Ç–æ–∫–∞ 10 —Ñ–µ–≤—Ä–∞–ª—è!\n–¶–µ–Ω–∞ - 79 BYN üëá",
            Markup.inlineKeyboard(
                [
                    [
                        Markup.button.url(
                            "–•–û–ß–£ –£–ß–ê–°–¢–í–û–í–ê–¢–¨ üî•",
                            "https://naumova-team.by/?utm_source=telegram&utm_medium=chat_bot&utm_campaign=sryv_knopka_1",
                        ),
                    ],
                    [Markup.button.callback("–ß–¢–û –ï–©–ï –í–•–û–î–ò–¢?", "MORE_INFO")],
                ],
                { resize_keyboard: true },
            ),
        );
    });

    bot.action("MORE_INFO", async (ctx) => {
        await ctx.reply(
            `üåü –ó–∞—á–µ–º –∂–¥–∞—Ç—å ? –í—Ä–µ–º—è –º–µ–Ω—è—Ç—å—Å—è —É–∂–µ –Ω–∞—Å—Ç–∞–ª–æ! 

üî•–í —Ñ–∏—Ç–Ω–µ—Å-–ø—Ä–æ–µ–∫—Ç–µ Naumova Team —Ç—ã –ø–æ–ª—É—á–∏—à—å –Ω–µ —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –∏ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ø–∏—Ç–∞–Ω–∏—è.

–ù–æ –∏:

‚úîÔ∏è –≤–∏–¥–µ–æ–º–∞—Ç–µ—Ä–∏–∞–ª "–ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å —Å–≤–æ–µ –∫–ë–ñ–£ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –∫–∞–ª–æ—Ä–∏–π";
‚úîÔ∏è –≤–∏–¥–µ–æ–º–∞—Ç–µ—Ä–∏–∞–ª "–ö–∞–∫ –ø–æ—Ö—É–¥–µ—Ç—å –±–µ–∑ –ø–æ–¥—Å—á–µ—Ç–∞ –∫–∞–ª–æ—Ä–∏–π";
‚úîÔ∏è –≤–∏–¥–µ–æ–º–∞—Ç–µ—Ä–∏–∞–ª "–ö–∞–∫ –Ω–µ —Å—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ –≤–µ—á–µ—Ä–∞–º –∏ –æ—Ç—Å—Ä–æ—á–∏—Ç—å —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞";
‚úîÔ∏è –≤–∏–¥–µ–æ–º–∞—Ç–µ—Ä–∏–∞–ª "–ö–∞–∫ —Ä–∞–∑–ª–∏—á–∞—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ–ª–æ–¥ –æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ";
‚úîÔ∏è –≤–∏–¥–µ–æ–º–∞—Ç–µ—Ä–∏–∞–ª "–ö–ê–ö –ü–û–•–£–î–ï–¢–¨ –ò –°–û–•–†–ê–ù–ò–¢–¨ –†–ï–ó–£–õ–¨–¢–ê–¢ –ù–ê–í–°–ï–ì–î–ê";

‚úîÔ∏è —á–µ–∫-–ª–∏—Å—Ç "–ü—Ä–æ–¥—É–∫—Ç—ã-–Ω–∞—Ö–æ–¥–∫–∏" (—ç—Ç–æ –ø—Ä–æ–¥—É–∫—Ç—ã —Å –≤—ã–≥–æ–¥–Ω—ã–º –∫–ë–ñ–£, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ª–µ–≥–∫–æ —Ö—É–¥–µ—Ç—å);
‚úîÔ∏è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –Ω–∏–∑–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã;

‚úîÔ∏è —Ä–æ–∑—ã–≥—Ä—ã—à —Ñ–∏—Ç–Ω–µ—Å-–±–æ–∫—Å–∞.

‚úÖ –ê –µ—â–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –º–æ–∂–Ω–æ –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è (—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –∑–∞–ø–∏—Å–∏)

‚úÖ –í–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ —è –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—ä—è—Å–Ω—è—é —Ç–µ—Ö–Ω–∏–∫—É, –Ω–æ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é —Å–≤–æ–∏—Ö –∞—Ç–ª–µ—Ç–æ–≤, —á—Ç–æ–±—ã –≤—Å–µ –¥–æ—à–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞.

üëç–¶–µ–Ω–∞ - 79 BYN

‚è∞ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞: 3 –Ω–µ–¥–µ–ª–∏.
‚è≥ –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º: 4 –Ω–µ–¥–µ–ª–∏.

–ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–∏—Ö –∞—Ç–ª–µ—Ç–æ–≤üòçüëá
–ò –∑–Ω–∞–π: —É —Ç–µ–±—è —Ç–æ–∂–µ –≤—Å—ë –ø–æ–ª—É—á–∏—Ç—Å—è!`,
            { parse_mode: "HTML" },
        );

        await delay(2000);
        await ctx.replyWithMediaGroup([
            {
                type: "photo",
                media: { source: "./assets/images/change_3.jpg" },
            },
        ]);

        await delay(4000);
        await ctx.reply("–ê –≤–æ—Ç —á—Ç–æ –≥–æ–≤–æ—Ä—è—Ç —Å–∞–º–∏ –∞—Ç–ª–µ—Ç—ã üòçü§ó", {
            parse_mode: "HTML",
        });

        await delay(2000);
        await ctx.replyWithMediaGroup([
            {
                type: "photo",
                media: { source: "./assets/images/comment_1.jpg" },
            },
        ]);

        await delay(6000);
        await ctx.reply(
            "–ü–æ—Å–≤—è—Ç–∏ 2025 –≥–æ–¥ —Å–≤–æ–µ–º—É –∑–¥–æ—Ä–æ–≤—å—é –∏ –∫—Ä–∞—Å–∏–≤–æ–π —Ñ–∏–≥—É—Ä–µ! –°—Ç–∞—Ä—Ç —É–∂–µ 10 —Ñ–µ–≤—Ä–∞–ª—è!",
            Markup.inlineKeyboard(
                [
                    [
                        Markup.button.url(
                            "–•–û–ß–£ –£–ß–ê–°–¢–í–û–í–ê–¢–¨ üî•",
                            "https://naumova-team.by/?utm_source=telegram&utm_medium=chat_bot&utm_campaign=sryv_knopka_2",
                        ),
                    ],
                    [
                        Markup.button.callback(
                            "–ö–ê–ö –ú–û–ñ–ù–û –û–ü–õ–ê–¢–ò–¢–¨?",
                            "PAYMENT_INFO",
                        ),
                    ],
                ],
                { resize_keyboard: true },
            ),
        );
    });

    bot.action("PAYMENT_INFO", async (ctx) => {
        await ctx.answerCbQuery();
        await ctx.reply("–í–≤–µ–¥–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤–æ–π –∏–Ω—Å—Ç–∞–≥—Ä–∞–º –¥–ª—è —Å–≤—è–∑–∏:");

        bot.on("text", async (ctx) => {
            const nickname = ctx.message.text;
            const adminId = process.env.ADMIN_ID;
            const user = ctx.from;
            const adminMessage = `
    üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —É–∑–Ω–∞—Ç—å –æ —Å–ø–æ—Å–æ–±–∞—Ö –æ–ø–ª–∞—Ç—ã:
    ‚ñ™Ô∏è –ò–º—è: ${user.first_name} ${user.last_name || ""}
    ‚ñ™Ô∏è UsernameTelegram: @${user.username || "–Ω–µ —É–∫–∞–∑–∞–Ω"}
    ‚ñ™Ô∏è InstagramUser: https://www.instagram.com/${
        nickname.toLowerCase() || "–Ω–µ —É–∫–∞–∑–∞–Ω"
    }
    ‚ñ™Ô∏è ID: ${user.id}`;

            try {
                await ctx.telegram.sendMessage(adminId, adminMessage.trim());
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω—É:", error);
            }

            await ctx.reply(
                "üåü –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è —è –Ω–∞–ø–∏—à—É —Ç–µ–±–µ –∏ —Ä–∞—Å—Å–∫–∞–∂—É –ø—Ä–æ –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–ø–ª–∞—Ç—ã. –°–ø–∞—Å–∏–±–æ üòá",
                { parse_mode: "HTML" },
            );
        });
    });
}

module.exports = { setupBotActions };
